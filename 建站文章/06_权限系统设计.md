# 权限系统设计

记录角色与访问边界（基于实际实现）。

## 角色
- admin：完全权限
- editor：只能管理自己的文章
- viewer：只读，无法访问后台

## 中间件
- `auth`：认证检查
- `CheckRole`：角色检查（`role:admin,editor`）

示例：
```php
Route::prefix('admin')->middleware(['auth'])->group(function () {
  Route::prefix('posts')->middleware(['role:admin,editor'])->group(function () {
    // CRUD & 发布/取消发布
  });
  Route::prefix('users')->middleware(['role:admin'])->group(function () {
    // 用户管理
  });
});
```

## 后台入口
- 未登录访问 `/admin` 重定向到登录
- 已登录访问 `/admin` 重定向到仪表盘

## 文章访问边界
- admin：访问所有文章
- editor：仅访问/编辑/删除自己的文章
- viewer：禁止访问后台文章模块

## 权限检查逻辑
- 控制器中：`checkPostPermission()` 方法
- admin：可访问所有文章
- editor：仅访问自己的文章（`$post->user_id === $user->user_id`）
