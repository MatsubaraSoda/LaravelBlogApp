# 运维与排错

简要记录常用运维检查与故障排查。

## 进程与服务
```bash
service --status-all | cat
ps aux | grep -E "nginx|php-fpm|mysql" | cat
```

## 日志位置
- Nginx：`/var/log/nginx/laravel_error.log`，`laravel_access.log`
- PHP-FPM 慢日志：`/var/log/php8.1-fpm-slow.log`
- Laravel：`storage/logs/laravel.log`

## 常见问题
- 启动后 502：检查 php-fpm 是否运行、socket 路径
- 数据库连接失败：确保 MySQL 已启动；验证 `.env` 中 DB_*；用户/权限
- 路由不生效：`php artisan route:clear`，确认 Nginx `try_files` 设置
- 权限问题：`storage` 与 `bootstrap/cache` 权限需可写

## 健康检查
- 路径：`/health` 返回 200

## 常用命令
```bash
php artisan config:clear && php artisan cache:clear && php artisan route:clear && php artisan view:clear
nginx -t && service nginx reload
service php8.1-fpm restart
service mysql status | cat
```
